@page "/"
@using Configo.Server
@using Microsoft.AspNetCore.Components.Web
@namespace Configo.Server.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <base href="~/"/>
    <!-- Old school libs -->
    <link rel="stylesheet" href="~/lib/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="~/lib/font-awesome/css/all.min.css"/>

    <!-- Blazor libs -->
    <link rel="stylesheet" href="_content/Blazorise/blazorise.css"/>
    <link rel="stylesheet" href="_content/Blazorise.Bootstrap5/blazorise.bootstrap5.css"/>
    <link rel="stylesheet" href="_content/Blazorise.Snackbar/blazorise.snackbar.css" />

    <!-- My css -->
    <link rel="stylesheet" href="dist/schema.css"/>

    <link rel="icon" type="image/png" href="favicon.png"/>
    <component type="typeof(HeadOutlet)" render-mode="ServerPrerendered"/>
</head>
<body>
<component type="typeof(App)" render-mode="ServerPrerendered"/>

<div id="blazor-error-ui" style="display:none">
    <environment include="Staging,Production">
        An error has occurred. This application may no longer respond until reloaded.
    </environment>
    <environment include="Development">
        An unhandled exception has occurred. See browser dev tools for details.
    </environment>
    <a href="" class="reload">Reload</a>
    <a class="dismiss">🗙</a>
</div>

<script src="~/js/monaco-environment.js" type="text/javascript"></script>
<script src="~/dist/schema.js" type="module"></script>
<script src="~/dist/variables.js" type="module"></script>
<script type="module">
    import { Schema } from "./dist/schema.js";
    import { Variables } from "./dist/variables.js";
    
    window.schema = new Schema();
    window.variables = new Variables();
</script>

<!-- Blazor libs -->
<script src="_content/Blazorise.Bootstrap5/modal.js?v=1.3.2" type="module"></script>
<script src="_content/Blazorise.Bootstrap5/tooltip.js?v=1.3.2" type="module"></script>

<!-- Old school libs -->
<script src="~/lib/bootstrap/js/bootstrap.bundle.min.js" type="text/javascript"></script>

<!-- Old school self written -->
<script src="~/js/clipboardHelper.js" type="text/javascript"></script>

<!-- Blazor itself -->
<script src="_framework/blazor.server.js" autostart="false"></script>
<script type="text/javascript">
    (() => {
        const fn = () => Blazor.start();
        // see if DOM is already available
        if (document.readyState === "complete" || document.readyState === "interactive") {
            // call on next available tick
            setTimeout(fn, 1);
        } else {
            document.addEventListener("DOMContentLoaded", fn);
        }
    })();    
</script>
</body>
</html>
